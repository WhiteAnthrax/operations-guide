<?xml version="1.0" encoding="UTF-8"?>
<chapter xml:id="ops-day-to-day" xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink"
    version="5.0">
    <title>Day to Day Operations</title>
    <para>This chapter aims to describe "A day in the life of an
    operator, by detailing the common tasks that every OpeStack
    administrator could expect to perform.</para>

    <section xml:id="watch-queues">
    <title>Watch the Queues</title>
    <para>A core part of OpenStack Compute is the message queue,
    provided by RabbitMQ, or QPID. The queue is responsible for:
    <itemizedlist>
    <listitem><para>Something!</para></listitem>
    </itemizedlist>
    </para>
    <para>
    In general, if the queue has no messages this means that they are
    reaching their destination. One of the common signs of trouble in
    Compute is if there are pileups of messages for certain 
    destinations. In cases like this, unless you are actively
    checking the queues, tasks can sit silently without being 
    processed.
    </para>
    <para>
    You can check the state of the queues with:
    <screen><prompt>#</prompt> <userinput>command</userinput></screen>
    </para>
    </section>
  
    <section xml:id="network-daily">
    <title>Network issues</title>
    <para> Openstack provides and relies on broad access to the
    network, so when trouble occurs here the issues can be wide 
    reaching. Thankfully there are some common tools you can use to 
    determine the location of problems.</para>
    <para>
    Pings, traceroutes, nslookups for networking issues
        TCP dumps
        Look for pings with high latency
    </para>
    </section>

    <section xml:id="resource-utilisation">
    <title>Resource Utilisation</title>
    <para>
    Disk I/O - look for 100% utilization spots
    CPU
    Straces
    </para>
    </section>

    <section xml:id="working-with-instances">
    <title>Working with Instances</title>
    <para>Running virtual machines is a complex business, and many
    different points of failure can be realised. It is worth paying
    attention to these common cases:
    <itemizedlist>
    <listitem><para>Instances stuck in "build" state</para></listitem>
    <listitem><para>Instances can't be "ping"ed</para></listitem>
    <listitem><para>Instances can't be accessed through a VNC console</para></listitem>
    </itemizedlist>
    </para>
    </section>
  
    <section xml:id="working-with-users">
    <title>Working with Users</title>
    <para>Direct users of OpenStack's Infrastructure-as-a-Service and
    Object Storage capabilities are likely to be technically 
    competent developers. You may find your Tier 1 support (if any!)
    relies on you more to provide user support for these cases.</para>
    <para>Here are some example types of "tickets" generated by 
    OpenStack users, and some tips for working the service into your
    support workflow</para>
    </section>

    <section xml:id="daily-monitoring">
    <title>Daily monitoring practices</title>
    <para>Noone likes a spammy nagios, or having tail -f of a log 
    file scroll past like the matrix. 
    Metrics to follow with alarm settting
    Syslog trolling</para>
    </section>

    <section xml:id="ops-tools-summary">
    <title>Summary of Operational Tools</title>
    <para>
        Available tools modified or used in Openstack
        Euca
        Nova.conf
        Curl
        etc.
        Nagios
    </para>
    </section>
</chapter>
